<div class="volunteer">
  <div ng-if="vm.edit">
    <div class="volunteer-edit container-fluid">
      <h1>Edit Profile</h1>
      <form name="volunteerEdit" novalidate role="form" ng-submit="vm.submit(volunteerEdit.$valid)" class="form-horizontal">
        <div class="row">
          <div class="col-md-4">
            <div class="form-group">
              <div class="col-sm-12">
                <h4>About</h4>
              </div>
              <div class="row">
                <div class="col-sm-4">
                  <h6>First Name</h6>
                </div>
                <div class="col-sm-8">
                  <input required type="text" class="form-control" ng-model="vm.volunteer.first_name" placeholder="First Name*">
                </div>
              </div>
              <div class="row">
                <div class="col-sm-4">
                  <h6>Middle Initial</h6>
                </div>
                <div class="col-sm-3">
                  <input type="text" class="form-control" ng-model="vm.volunteer.middle_name" placeholder="MI" maxlength="1">
                </div>
              </div>
              <div class="row">
                <div class="col-sm-4">
                  <h6>Last Name</h6>
                </div>
                <div class="col-sm-8">
                  <input required type="text" class="form-control" ng-model="vm.volunteer.last_name" placeholder="Last Name*">
                </div>
              </div>
              <div class="row">
                <div class="col-sm-4">
                  <h6>Age</h6>
                </div>
                <div class="col-sm-3">
                  <input type="number" class="form-control" ng-model="vm.volunteer.age" placeholder="Age">
                </div>
              </div>
              <div class="row">
                <div class="col-sm-4">
                  <h6>Organization</h6>
                </div>
                <div class="col-sm-8">
                  <input type="text" class="form-control" ng-model="vm.volunteer.organization" placeholder="Organization">
                </div>
              </div>
            </div>
            <div class="form-group">
              <div class="col-sm-12">
                <h4>Contact</h4>
              </div>
              <div class="col-sm-4">
                <h6>Street</h6>
              </div>
              <div class="col-sm-8">
                <input required type="text" class="form-control" ng-model="vm.volunteer.contact.street" id="street" placeholder="Street Address*">
              </div>
              <div class="col-sm-4">
                <h6>City</h6>
              </div>
              <div class="col-sm-8">
                <input required type="text" class="form-control" ng-model="vm.volunteer.contact.city" id="city" placeholder="City*">
              </div>
              <div class="col-sm-4">
                <h6>State</h6>
              </div>
              <div class="col-sm-8">
                <input required type="text" class="form-control" ng-model="vm.volunteer.contact.state" id="state" maxlength="2" placeholder="State*">
              </div>
              <div class="col-sm-4">
                <h6>Email</h6>
              </div>
              <div class="col-sm-8">
                <input name="email" required type="email" class="form-control" ng-model="vm.volunteer.contact.email" id="email" placeholder="E-mail Address*">
                <h6 ng-show="!volunteerEdit.email.$valid" class="err">Please enter a valid Email address.</h6>
              </div>
              <div class="col-sm-4">
                <h6>ZIP Code</h6>
              </div>
              <div class="col-sm-8">
                <input required ng-class="{invalid: !vm.zipValid}" type="text" class="form-control" ng-model="vm.volunteer.contact.zip" id="zip" maxlength="10" placeholder="ZIP Code*">
                <h6 ng-show="!vm.zipValid" class="err">Please enter a valid ZIP code.</h6>
              </div>
              <br>
              <div class="col-sm-4">
                <h6>Phone Number</h6>
              </div>
              <div class="col-sm-8">
                <input name="phone" onkeypress="return event.charCode >= 48 && event.charCode <= 57" required ng-class="{invalid: !vm.phoneValid}" type="tel" maxlength="10" class="form-control" ng-model="vm.volunteer.contact.phone_number"
                  placeholder="Phone Number*">
                <h6 ng-show="!vm.phoneValid" class="err">Please enter a valid 10-digit Phone number.</h6>
              </div>
              <div class="col-sm-4">
                <h6>Carrier</h6>
              </div>
              <div class="col-sm-8">
                <ui-select required ng-model="vm.volunteer.contact.carrier" ng-class="{invalid: !vm.carrierValid}" class="availability-select">
                  <ui-select-match>
                    {{$select.selected.name}}
                  </ui-select-match>
                  <ui-select-choices repeat="carrier.key as carrier in vm.enums.arrays.carriers | filter:{name: $select.search}">
                    {{carrier.name}}
                  </ui-select-choices>
                </ui-select>
                <h6 ng-show="!vm.carrierValid" class="err">Please select a phone service carrier</h6>
              </div>
              <div class="col-sm-4">
                <h6>Preferred Contact Method</h6>
              </div>
              <div class="col-sm-8">
                <ui-select required ng-model="vm.volunteer.contact.preferred_contact" class="availability-select">
                  <ui-select-match>
                    {{$select.selected.name}}
                  </ui-select-match>
                  <ui-select-choices repeat="prefObj.key as prefObj in vm.enums.arrays.preferred_contact | filter:{name: $select.search}">
                    {{prefObj.name}}
                  </ui-select-choices>
                </ui-select>
              </div>
            </div>
            <div class="form-group" ng-if="vm.userIsAdmin">
              <div class="col-sm-12">
                <h4>Admin</h4>
              </div>
              <div class="col-sm-4">
                <h6>Hours</h6>
              </div>
              <div class="col-sm-8">
                <input required type="number" class="form-control" ng-model="vm.volunteer.hours">
              </div>
              <div class="col-sm-4">
                <h6>Volunteer Level</h6>
              </div>
              <div class="col-sm-8">
                <ui-select required ng-model="vm.volunteer.volunteer_level" class="availability-select">
                  <ui-select-match>
                    {{$select.selected.name}}
                  </ui-select-match>
                  <ui-select-choices repeat="levelObj.key as levelObj in vm.enums.arrays.volunteer_level | filter:{name: $select.search}">
                    {{levelObj.name}}
                  </ui-select-choices>
                </ui-select>
              </div>
            </div>
          </div>
          <div class="col-md-8">
            <div class="form-group">
              <div class="col-sm-12">
                <h4>Languages Spoken</h4>
              </div>
              <div class="col-sm-12">
                <language-edit languages="vm.volunteer.languages"></language-edit>
              </div>
            </div>
            <div class="form-group">
              <div class="col-sm-12">
                <h4>Availability</h4>
                <h6>Please enter times for which you are generally available on a weekly basis.</h6>
              </div>
              <div class="col-sm-12">
                <availability-edit availability="vm.volunteer.availability"></availability-edit>
              </div>
            </div>
            <div class="form-group">
              <div class="col-sm-12">
                <h4>Additional Notes</h4>
              </div>
              <div class="col-sm-12">
                <textarea class="form-control" rows="5" ng-model="vm.volunteer.notes"></textarea>
              </div>
            </div>
            <div ng-if="vm.userIsAdmin" class="form-group">
              <div class="col-sm-12">
                <h4>Admin Notes</h4>
              </div>
              <div class="col-sm-12">
                <textarea class="form-control" rows="5" ng-model="vm.volunteer.admin_notes"></textarea>
              </div>
            </div>
  <span ng-show="vm.assignments.length === 0">There are no assignments to show.</span>
  <table class=" table table-striped table-hover" ng-show="vm.assignments.length > 0">
    <thead>
      <tr>
        <th>Date</th>
        <th>Time</th>
        <th>Assignment Name</th>
        <th>Language</th>
        <th>Has assigned?</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="assignment in vm.assignments | orderBy:'date'">
        <td ng-bind="assignment.start_date | date:'shortDate'"></td>
        <td ng-bind="assignment.start_date | date:'shortTime'"></td>
        <td ng-bind="assignment.name"></td>
        <td ng-bind="assignment.language_name | languageKeyToName"></td>
        <td>
          <span ng-if="!assignment.volunteers.length">
            None assigned.
            <span class="assignment__warning" ng-click="vm.openNotificationsModal(assignment.language)">
              Find volunteer
            </span>
          </span>
          <span ng-if="assignment.volunteers.length">
            <span ng-repeat="v in assignment.volunteers">
              {{ v.first_name }} {{ v.last_name }}
            </span>
          </span>
        </td>
      </tr>
    </tbody>
  </table>
          </div>
        </div>
        <div class="col-sm-12">
          <button class="btn btn-lg btn-primary" type="submit" value="submit">Save</button>
        </div>
      </form>
    </div>
  </div>
  <div ng-if="!vm.edit">
    <div class="volunteer-display container-fluid">
      <h1>{{ vm.volunteer.first_name }}
        {{ vm.volunteer.middle_name }}
        {{ vm.volunteer.last_name }}</h1>

      <div class="row">
        <div class="col-md-4">
          <div class="left-column__section">
            <p class="left-column__header">Age:</p>
            <span ng-bind="vm.volunteer.age || 'Unknown'"></span>
          </div>
          <div class="left-column__section">
            <p class="left-column__header">Gender:</p>
            <span ng-bind="vm.volunteer.sex || 'Unknown'"></span>
          </div>
          <div class="left-column__section">
            <p class="left-column__header">Organization:</p>
            <span ng-bind="vm.volunteer.organization || 'Unknown'"></span>
          </div>
          <div class="left-column__section">
            <p class="left-column__header">Languages:</p>
            <div ng-repeat="language in vm.volunteer.languages">
              <span ng-bind="language.language_name | languageKeyToName"></span>
              <span class="glyphicon" ng-class="{'glyphicon-edit': language.can_written_translate, 'glypicon-user': !language.can_written_translate}"></span>
            </div>
          </div>

          <div class="left-column__section">
            <p class="left-column__header">Volunteer Level:</p>
            <span ng-bind="vm.volunteer.volunteer_level">
          </div>
          <div class="left-column__section">
            <p class="left-column__header">Hours Completed:</p>
            <span ng-bind="vm.volunteer.hours"></span>
          </div>

          <div class="left-column__section">
            <p class="left-column__header">Contact:</p>
            <address>
              {{ vm.volunteer.contact.street }}<br>
              {{ vm.volunteer.contact.city }},
              {{ vm.volunteer.contact.state }}
              {{ vm.volunteer.contact.zip }}<br>
              {{ vm.volunteer.contact.phone_number }}<br>
              <a href="mailto:#">{{ vm.volunteer.contact.email }}</a>
            </address>
          </div>
        </div>

        <div class="col-md-8">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Availability</h3>
            </div>
            <table class="table table-striped table-hover availability-table">
              <thead>
              <tr>
                <th class="day-column">
                  Day
                </th>
                <th class="start-time-column">
                  Start Time
                </th>
                <th class="end-time-column">
                  End Time
                </th>
              </tr>
              </thead>
              <tbody>
              <tr ng-repeat="availability in vm.volunteer.availability">
                <td class="day-column" ng-bind="availability.day"></td>
                <td class="start-time-column" ng-bind="availability.start_time | date"></td>
                <td class="end-time-column" ng-bind="availability.end_time | date"></td>
              </tr>
              <tr ng-show="vm.volunteer.availability.length === 0">
                <td colspan="3">No availabilities listed</td>
              </tr>
              </tbody>
            </table>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Notes</h3>
            </div>
            <p class="panel-body" ng-show="vm.volunteer.notes" ng-bind="vm.volunteer.notes"></p>
            <p class="panel-body" ng-show="!vm.volunteer.notes">No notes found</p>
          </div>
          <div ng-if="vm.userIsAdmin" class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Admin Notes</h3>
            </div>
            <p class="panel-body" ng-show="vm.volunteer.admin_notes" ng-bind="vm.volunteer.admin_notes"></p>
            <p class="panel-body" ng-show="!vm.volunteer.admin_notes">No notes found</p>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Assignments</h3>
            </div>
            <p ng-show="vm.assignments.length === 0" class="panel-body">No assignments found</p>
            <assignment-list ng-if="vm.assignments.length > 0" assignments="vm.assignments"></assignment-list>
          </div>
        </div>
      </div>
      <button type="button" ng-click="vm.openNotificationsModal([vm.volunteer])" class="btn btn-lg btn-primary">Contact</button>
      <button type="button" ng-if="vm.userIsAdmin" ng-click="vm.edit = true" class="btn btn-lg btn-info">Edit</button>
    </div>
  </div>
</div>
